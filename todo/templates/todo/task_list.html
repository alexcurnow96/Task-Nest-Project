{% extends "base.html" %}
{% load static %}
{% csrf_token %}

<!-- Code partially taken from Dennis Ivy (see ReadMe for more details) -->
{% block content %}
<div class="main_content">
    <hr>
    <h1 class="main-title heading">My To Do List</h1>

    <button class="btn btn-task"><a href="{% url 'task_create' %}">Add Task</a></button>

    <table>
        <tr>
            <th>Item</th>
            <th></th>
        </tr>
        {% for task in tasks %}
        <tr>
            <input type="checkbox" class="task-checkbox" data-task-id="{{ task.id }}" {% if task.completed %}checked{% endif %}>
            <td><span class="task-title {% if task.completed %}completed{% endif %}">{{task.title}}</span></td>
            <td><button class="btn btn-task-sm btn-view"><a href="{% url 'task_detail' task.id %}">View</a></button></td>
            <td><button class="btn btn-task-sm btn-edit"><a href="{% url 'task_update' task.pk %}">Edit</a></button></td>
            <td><button class="btn btn-task-sm btn-delete"><a href="{% url 'task_delete' task.pk %}">Delete</a></button></td>
        </tr>
        {% empty %}
        
        {% endfor %}

        <p>Total tasks: {{ tasks.count }}</p>

    </table>
    <script src="{% static 'js/script.js' %}"></script>
</div>


{% endblock %}